<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href='./css/animate.min.css'></link>
    <link rel="stylesheet" href='./css/main.css'></link>
</head>

<body>
    <div class="video-popup">
        <div class="navigation__cross video-toggler">
            <div class="navigation__cross__inner">

            </div>
        </div>
    </div>
    <div>
        <div class="navigation__toggler navigation__toggler--fixed menu-toggler d-flex d-lg-none">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Слой_1" x="0px" y="0px" viewBox="0 0 16 16" style="enable-background:new 0 0 16 16;" xml:space="preserve">
<g>
	<path class="st0" d="M10,16v-6h6v6H10z M10,0h6v6h-6V0z M0,10h6v6H0V10z M0,0h6v6H0V0z"/>
</g>
</svg>
        </div>
        <nav class="navigation">
            <div class="navigation__wrapper">

                <div class="navigation__aside d-none d-lg-flex">
                    <div class="navigation__logo">
                        <img src="./img/logo.svg" alt="">
                    </div>
                    <div class="navigation__toggler menu-toggler">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Слой_1" x="0px" y="0px" viewBox="0 0 16 16" style="enable-background:new 0 0 16 16;" xml:space="preserve">
<g>
	<path class="st0" d="M10,16v-6h6v6H10z M10,0h6v6h-6V0z M0,10h6v6H0V10z M0,0h6v6H0V0z"/>
</g>
</svg>
                        <span>Меню</span>
                    </div>
                    <div class="navigation__language">
                        <img src="./img/ru.png" alt="" class="img-fluid">
                    </div>
                </div>
                <div class="navigation__menu">

                    <div class="navigation__cross menu-toggler">
                        <div class="navigation__cross__inner">

                        </div>
                    </div>
                    <ul class="navigation__menu-list">
                        <li class="navigation__menu-item active"><a href="index.html"><span>Главная</span></a></li>
                        <li class="navigation__menu-item"><a href="#about" id="about-link"><span>О компании</span></a></li>
                        <li class="navigation__menu-item"><a href="production.html"><span>Продукция</span></a></li>
                        <li class="navigation__menu-item"><a href="newest_products.html"><span>Новинки</span></a></li>
                        <li class="navigation__menu-item"><a href="fruits.html"><span>Овощи и фрукты</span></a></li>
                        <li class="navigation__menu-item"><a href="our_production.html"><span>Производство</span></a></li>
                        <li class="navigation__menu-item"><a href="partners.html"><span>Наши партнеры</span></a></li>
                        <li class="navigation__menu-item"><a href="blog.html"><span>Блог</span></a></li>
                        <li class="navigation__menu-item"><a href="contacts.html"><span>Контакты</span></a>
                        </li>
                        <li class="navigation__menu-item d-inline-block d-lg-none">
                            <div class="d-flex">
                                <div class="navigation__language mx-1">
                                    <img src="./img/ru.png" alt="" class="img-fluid">
                                </div>
                                <div class="navigation__language mx-1">
                                    <img src="./img/eng.png" alt="" class="img-fluid">
                                </div>
                            </div>
                        </li>

                        <div class="navigation__copyright">
                            <span>Сделано в студии <strong>Павла Чупина</strong></span>
                        </div>
                    </ul>

                </div>
            </div>
        </nav>
        <main id="horizontal-wrapper">
            <div class="horizon scroll">
                <!-- <img src="https://www.pixxelfactory.net/jInvertScroll/images/middle.png" alt="" />
                 -->
                <div class="scroll__inner bg-1">
                    <div class="parallax-bg" style='background-image: url("./img/bg-1.png");'>
                        <!-- <img src=""> -->
                    </div>

                </div>
                <div class="scroll__inner bg-2">
                    <div class="parallax-bg" style='background-image: url("./img/bg-2.png");'>
                        <!-- <img src="./img/bg-2.png"> -->

                    </div>
                </div>
                <div class="scroll__inner bg-3">
                    <div class="parallax-bg" style='background-image: url( "./img/bg-3.png");'>
                        <!-- <img src="./img/bg-3.png"> -->

                    </div>
                </div>
                <div class="scroll__inner bg-5">
                    <div class="parallax-bg" style=' background-image: url( "./img/bg-5.png");'>
                        <!-- <img src="./img/bg-5.png"> -->

                    </div>
                </div>
                <div class="scroll__inner bg-4">
                    <div class="parallax-bg" style='background-image: url("./img/bg-4.png");'>
                        <!-- <img src="./img/bg-4.png"> -->

                    </div>
                </div>
                <div class="scroll__inner bg-7">
                    <div class="parallax-bg" style='background-image: url("./img/bg-7.png");'>
                        <!-- <img src="./img/bg-4.png"> -->

                    </div>
                </div>
                <div class="scroll__inner bg-6">
                    <div class="static-bg" style='background-image: url("./img/bg-6.png");'>
                        <!-- <img src="./img/bg-4.png"> -->

                    </div>
                </div>

            </div>
            <div class="leafs scroll">
                <div class="scroll__inner leaf-1">
                    <img src="./img/leaf-1.png" alt="" class="img-fluid">
                </div>

                <div class="scroll__inner leaf-3">
                    <img src="./img/leaf-3.png" alt="" class="img-fluid">
                </div>
                <div class="scroll__inner leaf-4">
                    <img src="./img/leaf-4.png" alt="" class="img-fluid">
                </div>


                <div class="scroll__inner leaf-8">
                    <img src="./img/leaf-8.png" alt="" class="img-fluid">
                </div>
                <div class="scroll__inner leaf-9">
                    <img src="./img/leaf-9.png" alt="" class="img-fluid">
                </div>

                <div class="scroll__inner leaf-11">
                    <img src="./img/leaf-11.png" alt="" class="img-fluid">
                </div>

            </div>
            <div class="leafs-2 scroll">
                <div class="scroll__inner leaf-2">
                    <img src="./img/leaf-2.png" alt="" class="img-fluid">
                </div>
                <div class="scroll__inner leaf-5">
                    <img src="./img/leaf-5.png" alt="" class="img-fluid">
                </div>
                <div class="scroll__inner leaf-6">
                    <img src="./img/leaf-6.png" alt="" class="img-fluid">
                </div>
                <div class="scroll__inner leaf-7">
                    <img src="./img/leaf-7.png" alt="" class="img-fluid">
                </div>
                <div class="scroll__inner leaf-10">
                    <img src="./img/leaf-10.png" alt="" class="img-fluid">
                </div>
                <div class="scroll__inner leaf-12">
                    <img src="./img/leaf-12.png" alt="" class="img-fluid">
                </div>
                <div class="scroll__inner leaf-13">
                    <img src="./img/leaf-13.png" alt="" class="img-fluid">
                </div>
            </div>
            <div class="middle scroll">
                <div class="scroll__inner screen-1">
                    <div class="screen-1__logo">
                        <img src="./img/foodart-logo.svg" alt="" class="img-fluid">
                    </div>
                    <h2>Орехи и сухофрукты, овощи и фрукты из разных уголков мира.</h2>
                    <span class="breadcrumbs-link video-toggler">Смотреть видео</span>
                </div>
                <div class="scroll__inner screen-2">
                    <h1 class="title title--line hidden">Мы ценим людей и их стремление быть здоровыми</h1>
                    <p class="paragraph">
                        Наши орехи и сухофрукты идеально подходят всем, кто стремится к здоровому образу жизни. В них много витаминов и биологически активных веществ, кроме того они просто очень вкусные!
                    </p>
                </div>
                <div class="scroll__inner screen-3">
                    <h1 class="title title--line hidden">Мы любим свое дело</h1>
                    <p class="paragraph">
                        Мы ценим своих заказчиков и стараемся поддерживать, как деловые, так и дружеские отношения!
                    </p>
                </div>
                <div class="scroll__inner screen-4">
                    <h1 class="title title--line hidden">У нас огромный опыт</h1>
                    <p class="paragraph">
                        Мы предлагаем взаимовыгодное и удобное сотрудничество с высокой лояльностью к каждому клиенту.

                    </p>
                </div>
                <div class="scroll__inner screen-5">
                    <h1 class="title title--line hidden">Мы каждый день стремимся к большему</h1>
                    <p class="paragraph">
                        Мы разрабатываем новые линейки орехов и сухофруктов, воплощаем в жизнь самые смелые решения по упаковке и дизайну.
                    </p>
                </div>
                <div class="scroll__inner screen-6" id="about">
                    <h6 class="headline">О компании</h6>
                    <h1 class="title title--line hidden">Один из лидеров ритейла России в категории орехи и сухофрукты</h1>
                    <p class="paragraph">
                        Наша основная задача поддержать покупателя, удерживая цены на максимально низком уровне не за счет качества продукта, а за счет издержек внутри самой компании. </p>
                    <p class="paragraph">
                        Мы активно учувствуем в совместных проектах с Федеральными сетевыми ритейлерами по производству СТМ и стремимся быть лучшими, как для своих партнеров, так и для покупателей.
                    </p>
                    <a href="production.html" class="breadcrumbs-link">Далее/Наша продукция</a>

                </div>
            </div>

        </main>
        <div class='scroll-progress' id='progress'>
            <div class='scroll-progress__inner'></div>
        </div>
    </div>
</body>
<script src="./js/jquery.min.js"></script>
<script src="./js/lettering.js"></script>
<script src="./js/textillate.js"></script>
<script src="./js/menu.js"></script>
<script src="./js/jquery.jInvertScroll.js"></script>
<script>
    $.fn.isInViewport = function() {
        var elementLeft = $(this).offset().left;
        var elementRight = elementLeft + $(this).outerWidth();

        var viewportTop = $(window).scrollLeft();
        var viewportBottom = viewportTop + ($(window).width());
        // if (elementRight > viewportTop && elementLeft < viewportBottom) {
        //     console.log(`bottom ${viewportBottom} top ${viewportTop} el left ${elementLeft} el right ${elementRight}`)

        // }
        return elementRight > viewportTop && elementLeft < viewportBottom;
    };

    $(window).on('resize scroll', function() {
        $('.title').each(function() {
            // var activeColor = $(this).attr('id');
            if ($(this).isInViewport()) {
                setTimeout(() => {
                    $(this).textillate({ in: {
                            effect: 'fadeInRight',
                            delayScale: 1,
                            delay: 50,
                            sync: false,
                            shuffle: false,
                            reverse: false,
                            callback: function() {}
                        },
                    });
                }, 200);

            }
        });
    });
    const scrollProgress = document.querySelector('#progress .scroll-progress__inner');
    var elem = $.jInvertScroll([' .scroll '], // an array containing the selector(s) for the elements you want to animate
        {
            // height: 6000, // optional: define the height the user can scroll, otherwise the overall length will be taken as scrollable height
            onScroll: function(percent) { //optional: callback function that will be called when the user scrolls down, useful for animating other things on the page
                scrollProgress.style.width = percent * 100 + '%';
            }
        });
    window.addEventListener('load', () => {

        $("#about-link").click(function(e) {
            if ($(window).scrollTop() < $(document).height() - $(window).height()) {
                menu.classList.toggle("navigation__menu--active");

                $("html, body")
                    .stop()
                    .animate({
                            scrollTop: $(document).height() - $(window).height()
                        },
                        3500
                    );
            }

            e.preventDefault();
        });
        const videoToggler = document.querySelectorAll(".video-toggler");
        const videoPopup = document.querySelector(".video-popup");
        for (let i = 0; i < videoToggler.length; i++) {
            videoToggler[i].addEventListener("click", () => {
                videoPopup.classList.toggle("active");
            });
        }

        var speed = 1;
        var lastScrollTop = 0;
        // higher variation = faster acceleration
        function positon(variation) {
            newPosition = (scrollPercent * 15 * (speed * variation)) - (speed * variation);
            return newPosition + "px";
        }
        const parallaxBg = document.querySelectorAll('.parallax-bg')
        $(window).scroll(function(e) {
            var scrollNum = $(window).scrollTop();
            scrollPercent = ($(window).scrollTop() / ($(document).height() - $(window).height())) * 100;
            for (let i = 0; i < parallaxBg.length; i++) {
                parallaxBg[i].style.backgroundPosition = `${-scrollPercent * 3}px 0`;
            }
            lastScrollTop = scrollNum;
        });
        if (window.location.hash === '#about' && $(window).scrollTop() < $(document).height() - $(window).height()) {
            $("html, body")
            $(window).scrollTop($(document).height() - $(window).height())
            setTimeout(() => {
                $('#about .title').textillate({ in: {
                        effect: 'fadeInRight',
                        delayScale: 1,
                        delay: 50,
                        sync: false,
                        shuffle: false,
                        reverse: false,
                        callback: function() {}
                    },
                });
            }, 200);
        };
    })
</script>

</html>